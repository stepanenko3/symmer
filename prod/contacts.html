<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Page</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <link rel="shortcut icon" href="/assets/img/favicon.ico">
    <link rel="stylesheet" type="text/css" href="/assets/css/main.min.css" />
    <link rel="stylesheet" type="text/css" href="/assets/icomoon/style.css" />
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />
</head>

<body>
    <header class="header">
        <div class="container-big">
            <div class="header__i">
                <a href="/" class="header__logo">
                    <img src="/assets/img/logo.svg" alt="Symmer">
                </a>

                <div class="header-menu">
                    <div class="header-menu__item header-menu__item--with-content">
                        <a href="/" class="header-menu__toggle">
                            Продукция
                        </a>
                        <div class="header-menu__content">
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                        </div>
                    </div>
                    <div class="header-menu__item header-menu__item--with-content">
                        <a href="/" class="header-menu__toggle">
                            Продукция
                        </a>
                        <div class="header-menu__content">
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                            <a href="/" class="header-menu__child">Поливочные шланги</a>
                        </div>
                    </div>
                    <div class="header-menu__item">
                        <a href="/" class="header-menu__toggle">
                            Новости
                        </a>
                    </div>
                    <div class="header-menu__item">
                        <a href="/" class="header-menu__toggle">
                            Где купить
                        </a>
                    </div>
                    <div class="header-menu__item">
                        <a href="/" class="header-menu__toggle">
                            Контакты
                        </a>
                    </div>
                    <div class="header-menu__item">
                        <a href="/" class="header-menu__toggle">
                            Партнерам
                        </a>
                    </div>
                </div>

                <div class="header__cart">0</div>
            </div>
        </div>
    </header>


    <div class="container">
        <ul class="bread">
            <li><a href="/">Главная</a></li>
            <li><a href="/">Контакты</a></li>
        </ul>

        <div class="page-block">
            <div class="page__header">
                <div class="page__title">
                    Контакты
                </div>
            </div>

            <div class="row">
                <div class="col-md-3">
                    <div class="contact-block">
                        <div class="contact-block__title">
                            Звоните:
                        </div>
                        <a href="tel:+380484936641" class="contact-block__action">
                            +380 (4849) 36641
                        </a>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="contact-block">
                        <div class="contact-block__title">
                            Пишите:
                        </div>
                        <a href="mailto:info@symmer.ua" class="contact-block__action">
                            info@symmer.ua
                        </a>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="contact-block">
                        <div class="contact-block__title">
                            Ждем в гости:
                        </div>
                        <div class="contact-block__text">
                            Україна, Одеська область, м. Білгород-Дністровський, вул. Маяковського, 55
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="contact-block">
                        <div class="btn btn--fill">
                            связаться с нами
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-5">
                <div class="contacts__select">
                    <select id="contacts-gMapFilter" onchange="filterMarkers(this.value)"></select>
                </div>

                <div class="contacts__list" id="contacts-shops"></div>
            </div>
            <div class="col-md-7">
                <div class="contacts__map" id="contacts-gMap"></div>
            </div>
        </div>
    </div>


    <footer class="footer">
        <div class="container">
            <a href="/" class="footer__logo">
                <img src="/assets/img/logo.svg" alt="Symmer">
            </a>
            <div class="row">
                <div class="col-md-6">
                    <div class="footer__text">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                        laboris nisi ut aliquip ex ea commodo consequat.
                    </div>

                    <div class="footer__social">
                        <a href="/">
                            <img src="/assets/img/fb.svg" alt="Facebook - Symmer">
                        </a>
                        <a href="/">
                            <img src="/assets/img/inst.svg" alt="Instagram - Symmer">
                        </a>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="footer-menu">
                        <div class="footer__title">
                            Полезные ссылки
                        </div>
                        <a href="/" class="footer-menu__item">
                            О нас
                        </a>
                        <a href="/" class="footer-menu__item">
                            О нас
                        </a>
                        <a href="/" class="footer-menu__item">
                            О нас
                        </a>
                        <a href="/" class="footer-menu__item">
                            О нас
                        </a>
                        <a href="/" class="footer-menu__item">
                            О нас
                        </a>
                        <a href="/" class="footer-menu__item">
                            О нас
                        </a>
                        <a href="/" class="footer-menu__item">
                            О нас
                        </a>
                        <a href="/" class="footer-menu__item">
                            О нас
                        </a>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="footer__title">
                        Остались вопросы?
                    </div>
                    <div class="footer__label">
                        Звоните:
                    </div>
                    <a href="tel:+380484936641" class="footer__contact">
                        +380 (4849) 36641
                    </a>
                    <div class="footer__label">
                        Пишите:
                    </div>
                    <a href="mailto:info@symmer.ua" class="footer__contact">
                        info@symmer.ua
                    </a>
                    <div class="footer__label">
                        Ждем в гости:
                    </div>
                    <div class="footer__address">
                        Україна, Одеська область, м. Білгород-Дністровський, вул. Маяковського, 55
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="//code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAbcr7L9kuL05_hSogIqNmGEJj5x2hSipY&callback=initialize">
    </script>

    <script>
        // var infowindow;
        var activeMarker;
        var gMarkers = [];
        var cities = {
            kiev: 'г. Киев',
            odessa: 'г. Одесса',
        };
        var markers = [
            [1, 'Магазин 1', 52.4357808, 4.991315699999973, ['kiev'], [
                { name: 'Адрес', value: 'вул. Хрещатик, 1' },
                { name: 'Телефон', value: '093 123 45 67' },
                { name: 'Пн-Нд', value: '10:00 - 21:00' },
            ]],
            [2, 'Магазин 2', 52.4357808, 4.981315699999973, ['kiev'], [
                    { name: 'Адрес', value: 'вул. Хрещатик, 1' },
                    { name: 'Телефон', value: '093 123 45 67' },
                    { name: 'Пн-Нд', value: '10:00 - 21:00' },
            ]],
            [3, 'Магазин 3', 52.4555687, 5.039231599999994, ['odessa'], [
                    { name: 'Адрес', value: 'вул. Хрещатик, 1' },
                    { name: 'Телефон', value: '093 123 45 67' },
                    { name: 'Пн-Нд', value: '10:00 - 21:00' },
            ]],
            [4, 'Магазин 4', 52.4555687, 5.029231599999994, ['odessa'], [
                { name: 'Адрес', value: 'вул. Хрещатик, 1' },
                { name: 'Телефон', value: '093 123 45 67' },
                { name: 'Пн-Нд', value: '10:00 - 21:00' },
            ]],
        ];

        /**
        * Function to init map
        */
        function initialize() {
            // infowindow = new google.maps.InfoWindow({
            //     content: ''
            // });

            var center = new google.maps.LatLng(52.4357808, 4.991315699999973);
            var mapOptions = {
                zoom: 12,
                maxZoom: 18,
                center: center,
                mapTypeId: google.maps.MapTypeId.TERRAIN,
                styles: [
                    {
                        "featureType": "water",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#e9e9e9"
                            },
                            {
                                "lightness": 17
                            }
                        ]
                    },
                    {
                        "featureType": "landscape",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#f5f5f5"
                            },
                            {
                                "lightness": 20
                            }
                        ]
                    },
                    {
                        "featureType": "road.highway",
                        "elementType": "geometry.fill",
                        "stylers": [
                            {
                                "color": "#ffffff"
                            },
                            {
                                "lightness": 17
                            }
                        ]
                    },
                    {
                        "featureType": "road.highway",
                        "elementType": "geometry.stroke",
                        "stylers": [
                            {
                                "color": "#ffffff"
                            },
                            {
                                "lightness": 29
                            },
                            {
                                "weight": 0.2
                            }
                        ]
                    },
                    {
                        "featureType": "road.arterial",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#ffffff"
                            },
                            {
                                "lightness": 18
                            }
                        ]
                    },
                    {
                        "featureType": "road.local",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#ffffff"
                            },
                            {
                                "lightness": 16
                            }
                        ]
                    },
                    {
                        "featureType": "poi",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#f5f5f5"
                            },
                            {
                                "lightness": 21
                            }
                        ]
                    },
                    {
                        "featureType": "poi.park",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#dedede"
                            },
                            {
                                "lightness": 21
                            }
                        ]
                    },
                    {
                        "elementType": "labels.text.stroke",
                        "stylers": [
                            {
                                "visibility": "on"
                            },
                            {
                                "color": "#ffffff"
                            },
                            {
                                "lightness": 16
                            }
                        ]
                    },
                    {
                        "elementType": "labels.text.fill",
                        "stylers": [
                            {
                                "saturation": 36
                            },
                            {
                                "color": "#333333"
                            },
                            {
                                "lightness": 40
                            }
                        ]
                    },
                    {
                        "elementType": "labels.icon",
                        "stylers": [
                            {
                                "visibility": "off"
                            }
                        ]
                    },
                    {
                        "featureType": "transit",
                        "elementType": "geometry",
                        "stylers": [
                            {
                                "color": "#f2f2f2"
                            },
                            {
                                "lightness": 19
                            }
                        ]
                    },
                    {
                        "featureType": "administrative",
                        "elementType": "geometry.fill",
                        "stylers": [
                            {
                                "color": "#fefefe"
                            },
                            {
                                "lightness": 20
                            }
                        ]
                    },
                    {
                        "featureType": "administrative",
                        "elementType": "geometry.stroke",
                        "stylers": [
                            {
                                "color": "#fefefe"
                            },
                            {
                                "lightness": 17
                            },
                            {
                                "weight": 1.2
                            }
                        ]
                    }
                ]
            };

            map = new google.maps.Map(document.getElementById('contacts-gMap'), mapOptions);
            for (i = 0; i < markers.length; i++) {
                addMarker(markers[i]);
            }

            var htmlSelect = '<option value="">Выберите город</option>';

            for (const [key, value] of Object.entries(cities)) {
                htmlSelect += '<option value="' + key + '">' + value + '</option>';
            }

            document.getElementById('contacts-gMapFilter').innerHTML = htmlSelect;

            filterDataMarkers(gMarkers);
        }

        /**
        * Function to add marker to map
        */
        function addMarker(marker) {
            var id = marker[0];
            var data = marker[5];
            var cities = marker[4];
            var title = marker[1];
            var pos = new google.maps.LatLng(marker[2], marker[3]);
            var content = marker[1];

            gMarker = new google.maps.Marker({
                id: id,
                title: title,
                position: pos,
                cities: cities,
                data: data,
                map: map,
                icon: '/assets/img/marker.svg',
            });

            gMarkers.push(gMarker);

            // Marker click listener
            google.maps.event.addListener(gMarker, 'click', (function (gMarker, content) {
                return function () {
                    activateMarker(gMarker.id);
                }
            })(gMarker, content));
        }

        /**
        * Function to filter markers by cities
        */
        filterMarkers = function(city) {
            var bounds = new google.maps.LatLngBounds();
            var filteredMarkers = [];
            for (i = 0; i < gMarkers.length; i++) {
                marker = gMarkers[i];

                if((typeof marker.cities == 'object' && marker.cities.indexOf(city) >= 0) || city.length == 0) {
                    marker.setVisible(true);
                    bounds.extend(marker.getPosition());
                    filteredMarkers.push(marker);
                } else {          
                    marker.setVisible(false);
                }

                map.fitBounds(bounds);
            }

            filterDataMarkers(filteredMarkers);
        }

        function activateMarker(markerId) {
            for (i = 0; i < gMarkers.length; i++) {
                if (gMarkers[i].id == markerId) {
                    gMarkers[i].setIcon('/assets/img/marker-primary.svg');
                    activeMarker = gMarkers[i];

                    map.panTo(gMarkers[i].getPosition());
                    map.setZoom(17);
                } else {
                    gMarkers[i].setIcon('/assets/img/marker.svg');
                }
            }

            var e = document.getElementById('contacts-gMapFilter');
            filterMarkers(e.options[e.selectedIndex].value);
        }
        
        function filterDataMarkers(filteredMarkers) {
            var htmlData = '';

            for (var markerValue of filteredMarkers) {
                htmlData += '<div class="contacts-shop' + (activeMarker && activeMarker.id == markerValue.id ? ' active' : '') + '" onclick="activateMarker(' + markerValue.id + ')">';

                var citiesValue = [];
                for (var cityValue of markerValue.cities) {
                    citiesValue.push(cities[cityValue]);
                }

                htmlData += '<div class="contacts-shop__line">' + citiesValue.join(', ') + '</div>';
                htmlData += '<div class="contacts-shop__title">' + markerValue.title + '</div>';

                for (var dataValue of markerValue.data) {
                    htmlData += '<div class="contacts-shop__line">';
                    htmlData += '<span>' + dataValue.name + '</span>';
                    htmlData += '<span>' + dataValue.value + '</span>';
                    htmlData += '</div>';
                }

                htmlData += '</div>';
            }

            document.getElementById('contacts-shops').innerHTML = htmlData;
        }




        function addToCart(_t, product_id, options, quantity) {
            $.ajax({
                url: 'index.php?route=checkout/cart/add',
                type: 'post',
                data: {
                    product_id: product_id,
                    quantity: (typeof (quantity) != 'undefined' ? quantity : 1),
                    option: options
                },
                dataType: 'json',
                beforeSend: function () {
                    $(_t).toggleClass('loading');
                },
                complete: function () {
                    $(_t).toggleClass('loading');
                },
                success: function (json) {
                    if (json['redirect']) {
                        location = json['redirect'];
                    }

                    if (json['success']) {
                        $('.modal--addtocart .modal__text').html(json['success']);
                        toggleModal('addtocart');

                        // let html = '<img src="/catalog/view/theme/default/image/check___ic.svg" alt="" class="check-image">';

                        // $('#product_' + product_id + '_cart').html(html);
                        // $('#product_' + product_id + '_cart_2').html(html);
                        // $('#product_' + product_id + '_cart_3').html(html);

                        // Need to set timeout otherwise it wont update the total
                        setTimeout(function () {
                            $('#cart-total ~ .badge').html(json['count']);

                            if (json['count'] !== 0) {
                                $("#cart-total").addClass("not-empty");
                            }
                        }, 100);

                        $('#cart > ul').load('index.php?route=common/cart/info ul li');
                    }
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                }
            });
        }

        function openTab(item, index) {
            var container = $(item).closest('.page-tabs');
            var caption = container.find('.page-tabs__caption li');
            var content = container.find('.page-tabs__content');

            caption.removeClass('active');
            caption.eq(index - 1).addClass('active');

            content.removeClass('active');
            content.eq(index - 1).addClass('active');
        }

        function toggleMenu(name) {
            $('.mobile-menu--' + name).toggleClass('mobile-menu--open');
        }

        function toggleModal(modal) {
            $(".modal--" + modal).toggleClass('modal--open');
        }

        $(document).ready(function () {
            $('.main-slider').owlCarousel({
                items: 1,
                loop: false,
                dots: true,
                nav: false,
            });

            $('.categories-slider').owlCarousel({
                items: 4,
                loop: false,
                dots: true,
                nav: true,
            });

            $('.products-slider').owlCarousel({
                items: 5,
                loop: false,
                dots: true,
                nav: true,
            });

            $('.page-tabs__caption li').eq(0).addClass('active');
            $('.page-tabs__content').eq(0).addClass('active');

            $('.page-tabs__caption').on('click', 'li:not(.active)', function () {
                $(this)
                    .addClass('active').siblings().removeClass('active')
                    .closest('.page-tabs').find('.page-tabs__content').removeClass('active').eq($(this).index()).addClass('active');
            });

            $('#button-callback').on('click', function (e) {
                e.preventDefault();
                var self$ = $(this);
                var form$ = self$.parents('form');

                $.ajax({
                    url: 'index.php?route=checkout/cart/callback',
                    type: 'post',
                    data: form$.find('input[type=\'text\'], input[type=\'email\'], input[type=\'hidden\'], input[type=\'radio\']:checked, input[type=\'checkbox\']:checked, select, textarea'),
                    dataType: 'json',
                    beforeSend: function () {
                        self$.toggleClass('loading');
                    },
                    complete: function () {
                        self$.toggleClass('loading');
                    },
                    success: function (json) {
                        $('.modal--callback .modal__text').remove();

                        if (json['error']) {
                            $('.modal--callback .modal__header').after('<div class="modal__text modal__text--error">' + json['error'] + '</div>');
                        }

                        if (json['success']) {
                            $('.modal--callback .modal__header').after('<div class="modal__text modal__text--success">' + json['success'] + '</div>');
                            form$[0].reset();
                        }
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                    }
                });
            });

            $('.contacts-form button').on('click', function (e) {
                e.preventDefault();
                var self$ = $(this);
                var form$ = self$.parents('form');


                $.ajax({
                    url: 'index.php?route=checkout/cart/contact',
                    type: 'post',
                    data: new FormData(form$[0]),
                    dataType: 'json',
                    contentType: false,
                    cache: false,
                    processData: false,
                    beforeSend: function () {
                        self$.toggleClass('loading');
                    },
                    complete: function () {
                        self$.toggleClass('loading');
                    },
                    success: function (json) {
                        form$.find('.contacts-form__text').remove();

                        if (json['error']) {
                            $('.contacts-form .h2').after('<div class="contacts-form__text contacts-form__text--error">' + json['error'] + '</div>');
                        }

                        if (json['success']) {
                            $('.contacts-form .h2').after('<div class="contacts-form__text contacts-form__text--success">' + json['success'] + '</div>');
                            form$[0].reset();
                        }
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                    }
                });
            });

            $('[data-button-cart]').on('click', function (e) {
                e.preventDefault();
                var self$ = $(this);
                var form$ = self$.parents('form.product');
                $.ajax({
                    url: 'index.php?route=checkout/cart/add',
                    type: 'post',
                    data: form$.find('input[type=\'text\'], input[type=\'hidden\'], input[type=\'radio\']:checked, input[type=\'checkbox\']:checked, select, textarea'),
                    dataType: 'json',
                    beforeSend: function () {
                        self$.toggleClass('loading');
                    },
                    complete: function () {
                        self$.toggleClass('loading');
                    },
                    success: function (json) {

                        if (json['error']) {
                            if (json['error']['option']) {
                                for (i in json['error']['option']) {
                                    var element = $('#input-option' + i.replace('_', '-'));

                                    if (element.parent().hasClass('input-group')) {
                                        element.parent().after('<div class="text-danger">' + json['error']['option'][i] + '</div>');
                                    } else {
                                        element.after('<div class="text-danger">' + json['error']['option'][i] + '</div>');
                                    }
                                }
                            }
                        }

                        if (json['success']) {
                            $('.modal--addtocart .modal__text').html(json['success']);
                            toggleModal('addtocart');

                            $('#cart-total ~ .badge').html(json['count']);

                            if (json['count'] !== 0) {
                                $("#cart-total").addClass("not-empty");
                            }

                            // let html = '<img src="/catalog/view/theme/default/image/check___ic.svg" alt="" class="check-image">';

                            // $('#product__cart').html(html);
                            // $('#product__cart_2').html(html);
                            // $('#product__cart_3').html(html);

                            $('#cart > ul').load('index.php?route=common/cart/info ul li');
                        }
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
                    }
                });
            });
        });
    </script>
</body>

</html>